$(function(){var a='Sorry. Something went wrong on our end.<br>But <strong>please, don\'t despair!</strong> You can still send us your message on <a href="https://www.facebook.com/rmittkd" class="link-blend">Facebook</a>, and let us know of the issue.',b=$(document.getElementById("contact-form")),c=b.find(".form-field"),d=(b.find(".form-error"),b.children(".form-result")),e=d.children(".form-result-message"),f=b.find(".form-submit"),g=function(a,b){a&&(b.attr("aria-invalid",!0).addClass("form-field--invalid"),a.attr("role","alert").fadeIn().removeClass("hidden"))},h=function(a){var b,c=a.nextAll(".form-error"),d=c.filter(":visible");return 0===a.val().length?b=c.filter(".form-error--blank"):"email"===a[0].id&&(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a.val())||(b=c.filter(".form-error--email"))),b||a.removeAttr("aria-invalid").removeClass("form-field--invalid"),d.length>0?(d.removeAttr("role"),b&&b[0]===d[0]||d.fadeOut(200,function(){g(b,a)}).addClass("hidden")):g(b,a),!b};c.blur(function(){h($(this))});var i=function(a,b){e.html(b),d.removeClass("form-result--fail form-result--success").addClass("form-result--"+a),d.fadeIn().removeClass("hidden").focus(),ga("send","event","contact form","submit",a)};b.submit(function(d){d.preventDefault();var e;c.each(function(){var a=$(this);h(a)||e||(e=a)}),e?e.focus():(f.addClass("form-submit--spinner"),$.ajax({type:"POST",url:b.attr("action"),data:b.serialize(),dataType:"json"}).done(function(b){b instanceof Array&&"sent"===b[0].status?i("success","<strong>Thank you!</strong> Your message has been sent. We'll get in touch with you as soon as possible."):i("fail",b.message?b.message:a)}).fail(function(){i("fail",a)}).always(function(){f.removeClass("form-submit--spinner")}))})});